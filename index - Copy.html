<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Amiri', serif; }
        body { background: #f5f7fa; min-height: 100vh; text-align: center; direction: rtl; }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        header { padding: 20px; background: #1e4d3f; color: white; border-radius: 10px; margin-bottom: 20px; }
        h1 { font-size: 2.5em; }
        .controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        select, button { padding: 10px 15px; border: none; border-radius: 5px; font-size: 1.1em; cursor: pointer; background: white; }
        .quran-text { background: white; padding: 20px; border-radius: 10px; font-size: 1.3em; line-height: 2; text-align: justify; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .verse { margin-bottom: 15px; }
        .verse-number { background: #1e4d3f; color: white; padding: 5px 10px; border-radius: 5px; margin-left: 10px; }
        .audio-player { width: 100%; margin-top: 20px; }
        .tafsir-box { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 15px; display: none; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
            <p>Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</p>
        </header>

        <div class="controls">
            <select id="surah-select" onchange="loadSurah()">
                <option value="">ğŸ”½ Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©</option>
            </select>
            <select id="reciter-select" onchange="changeReciter()">
                <option value="ar.alafasy">ğŸ¤ Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
                <option value="ar.abdulsamad">ğŸ¤ Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯</option>
                <option value="ar.husary">ğŸ¤ Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ</option>
                <option value="ar.ajamy">ğŸ¤ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ø¬Ù…ÙŠ</option>
                <option value="ar.mahermuaiqly">ğŸ¤ Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ</option>
            </select>
            <button onclick="toggleTafsir()">ğŸ“œ Ø§Ù„ØªÙØ³ÙŠØ±</button>
        </div>

        <div class="quran-text" id="quran-content">â— ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø³ÙˆØ±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ§Øª.</div>

        <div class="tafsir-box" id="tafsir-content"></div>

        <audio id="audio-player" class="audio-player" controls autoplay>
            <source src="" type="audio/mp3">
        </audio>
    </div>

    <script>
        const apiBase = "https://api.alquran.cloud/v1/";
        let selectedSurah = 1;
        let selectedReciter = "ar.alafasy";
        let tafsirVisible = false;

        window.onload = async function () {
            await loadSurahList();
            await loadSurah();
        };

        async function loadSurahList() {
            const response = await fetch(`${apiBase}surah`);
            const data = await response.json();
            const surahSelect = document.getElementById('surah-select');
            data.data.forEach(surah => {
                const option = document.createElement('option');
                option.value = surah.number;
                option.textContent = `${surah.number}. ${surah.englishName} - ${surah.name}`;
                surahSelect.appendChild(option);
            });
            surahSelect.value = selectedSurah;
        }

        async function loadSurah() {
            selectedSurah = document.getElementById('surah-select').value || 1;
            const response = await fetch(`${apiBase}surah/${selectedSurah}`);
            const data = await response.json();
            const quranContent = document.getElementById('quran-content');
            quranContent.innerHTML = '';

            data.data.ayahs.forEach(ayah => {
                const verseElement = document.createElement('div');
                verseElement.classList.add('verse');
                verseElement.innerHTML = `<span class="verse-number">${ayah.numberInSurah}</span> ${ayah.text}`;
                quranContent.appendChild(verseElement);
            });

            playAudio(); // ğŸ”Š ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©
        }

        async function loadTafsir() {
            const response = await fetch(`${apiBase}tafsir/1/${selectedSurah}`);
            const data = await response.json();
            const tafsirContent = document.getElementById('tafsir-content');
            tafsirContent.innerHTML = `<strong>ğŸ“œ Ø§Ù„ØªÙØ³ÙŠØ±:</strong><p>${data.data.text}</p>`;
        }

        function toggleTafsir() {
            const tafsirContent = document.getElementById('tafsir-content');
            tafsirVisible = !tafsirVisible;
            tafsirContent.style.display = tafsirVisible ? 'block' : 'none';
            if (tafsirVisible) loadTafsir();
        }

        function changeReciter() {
            selectedReciter = document.getElementById('reciter-select').value;
            playAudio(); // ğŸ”„ ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        }

        function playAudio() {
            const audioPlayer = document.getElementById('audio-player');
            audioPlayer.src = `https://cdn.islamic.network/quran/audio/128/${selectedReciter}/${selectedSurah}.mp3`;
            audioPlayer.play();
        }
    </script>

</body>
</html>
